    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
    'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [31, 50, 70],  # 树的叶子数
    'classifier__max_depth': [-1, 5, 7],  # 最大深度
    'classifier__learning_rate': [0.01, 0.05],  # 学习率
    'classifier__n_estimators': [100, 200],  # 树的数量



Classification Report:
[[    0     0     0     0     0]
 [    0  5130 12026  1103     0]
 [    0  2496 44750  1294     0]
 [    0  2572 12384  2826     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.503040  0.280957  0.360544  18259.0   0.434370
0    0.647050  0.921920  0.760408  48540.0   0.688080
1    0.541068  0.158925  0.245686  17782.0   0.365362

    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
   # 'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    #'classifier__num_leaves': [31],  # 树的叶子数
    'classifier__max_depth': [-1],  # 最大深度
    'classifier__learning_rate': [ 0.1],  # 学习率
    'classifier__n_estimators': [100],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  5235 11837  1187     0]
 [    0  2561 44505  1474     0]
 [    0  2492 12036  3254     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.508845  0.286708  0.366764  18259.0   0.440575
0    0.650867  0.916873  0.761303  48540.0   0.690960
1    0.550127  0.182994  0.274634  17782.0   0.392597



    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
   # 'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    #'classifier__num_leaves': [31],  # 树的叶子数
    'classifier__max_depth': [-1],  # 最大深度
    'classifier__learning_rate': [ 0.05],  # 学习率
    'classifier__n_estimators': [100],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  4856 12455   948     0]
 [    0  2319 45100  1121     0]
 [    0  2500 12730  2552     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.501912  0.265951  0.347677  18259.0   0.426272
0    0.641673  0.929131  0.759100  48540.0   0.683997
1    0.552261  0.143516  0.227827  17782.0   0.351845
    class_real  class_pred

    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
   # 'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    #'classifier__num_leaves': [31],  # 树的叶子数
    'classifier__max_depth': [-1],  # 最大深度
    'classifier__learning_rate': [ 0.1],  # 学习率
    'classifier__n_estimators': [300],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  5645 11268  1346     0]
 [    0  2736 44101  1703     0]
 [    0  2361 11522  3899     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.525507  0.309163  0.389297  18259.0   0.460989
0    0.659296  0.908550  0.764110  48540.0   0.697571
1    0.561169  0.219267  0.315326  17782.0   0.427766



    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
   # 'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    #'classifier__num_leaves': [31],  # 树的叶子数
    'classifier__max_depth': [-1],  # 最大深度
    'classifier__learning_rate': [ 0.1],  # 学习率
    'classifier__n_estimators': [500],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

2024-12-20 16:24:08.947 | INFO     | lightgbm_base:fit_class_model:113 - Best parameters found: 
2024-12-20 16:24:08.949 | INFO     | lightgbm_base:fit_class_model:119 - Best F0.5 score: 
Classification Report:
[[    0     0     0     0     0]
 [    0  5784 11054  1421     0]
 [    0  2795 43909  1836     0]
 [    0  2346 11251  4185     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.529428  0.316775  0.396382  18259.0   0.466760
0    0.663138  0.904594  0.765272  48540.0   0.700535
1    0.562349  0.235350  0.331827  17782.0   0.440063



    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
   # 'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    #'classifier__num_leaves': [31],  # 树的叶子数
    'classifier__max_depth': [-1],  # 最大深度
    'classifier__learning_rate': [ 0.1],  # 学习率
    'classifier__n_estimators': [1000],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  6064 10646  1549     0]
 [    0  2896 43597  2047     0]
 [    0  2295 10861  4626     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.538783  0.332110  0.410924  18259.0   0.479148
0    0.669652  0.898166  0.767256  48540.0   0.705554
1    0.562637  0.260151  0.355791  17782.0   0.456483

    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
   # 'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    #'classifier__num_leaves': [31],  # 树的叶子数
    'classifier__max_depth': [-1],  # 最大深度
    'classifier__learning_rate': [ 0.1],  # 学习率
    'classifier__n_estimators': [1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  6166 10536  1557     0]
 [    0  2944 43492  2104     0]
 [    0  2261 10745  4776     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.542257  0.337696  0.416200  18259.0   0.483661
0    0.671453  0.896003  0.767644  48540.0   0.706884
1    0.566078  0.268586  0.364316  17782.0   0.463419



    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
   # 'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [127],  # 树的叶子数
    'classifier__max_depth': [7],  # 最大深度
    'classifier__learning_rate': [ 0.1],  # 学习率
    'classifier__n_estimators': [1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  6762  9744  1753     0]
 [    0  3284 42674  2582     0]
 [    0  2257 10095  5430     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.549622  0.370338  0.442510  18259.0   0.501104
0    0.682642  0.879151  0.768534  48540.0   0.714587
1    0.556068  0.305365  0.394235  17782.0   0.477640



    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
   # 'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [63],  # 树的叶子数
    'classifier__max_depth': [6],  # 最大深度
    'classifier__learning_rate': [ 0.1],  # 学习率
    'classifier__n_estimators': [1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  6477 10023  1759     0]
 [    0  3167 42956  2417     0]
 [    0  2312 10354  5116     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.541736  0.354729  0.428727  18259.0   0.490066
0    0.678256  0.884961  0.767942  48540.0   0.711494
1    0.550581  0.287707  0.377927  17782.0   0.465514



    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
   # 'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [255],  # 树的叶子数
    'classifier__max_depth': [8],  # 最大深度
    'classifier__learning_rate': [ 0.1],  # 学习率
    'classifier__n_estimators': [1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  6808  9669  1782     0]
 [    0  3265 42665  2610     0]
 [    0  2298  9968  5516     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.550319  0.372857  0.444532  18259.0   0.502487
0    0.684809  0.878966  0.769835  48540.0   0.716462
1    0.556722  0.310201  0.398411  17782.0   0.480371



    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
    'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [255],  # 树的叶子数
    'classifier__max_depth': [8],  # 最大深度
    'classifier__learning_rate': [ 0.1],  # 学习率
    'classifier__n_estimators': [1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  6965  9595  1699     0]
 [    0  3243 42768  2529     0]
 [    0  2278  9938  5566     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.557825  0.381456  0.453082  18259.0   0.510608
0    0.686474  0.881088  0.771700  48540.0   0.718201
1    0.568307  0.313013  0.403684  17782.0   0.488606

    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
    'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [255],  # 树的叶子数
    'classifier__max_depth': [8],  # 最大深度
    'classifier__learning_rate': [ 0.08],  # 学习率
    'classifier__n_estimators': [1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  6825  9775  1659     0]
 [    0  3200 42845  2495     0]
 [    0  2257 10041  5484     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.555691  0.373788  0.446940  18259.0   0.506403
0    0.683759  0.882674  0.770587  48540.0   0.716031
1    0.568998  0.308402  0.400000  17782.0   0.486740



    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
    'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [255],  # 树的叶子数
    'classifier__max_depth': [8],  # 最大深度
    'classifier__learning_rate': [ 0.12],  # 学习率
    'classifier__n_estimators': [1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  6911  9581  1767     0]
 [    0  3256 42634  2650     0]
 [    0  2265  9799  5718     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.555904  0.378498  0.450360  18259.0   0.508259
0    0.687490  0.878327  0.771279  48540.0   0.718722
1    0.564184  0.321561  0.409643  17782.0   0.490210

    # 分类
    param_grid_class = {    'classifier__objective': ['multiclass'],  # 三分类任务
   'classifier__num_class': [3],  # 类别数
    'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [255],  # 树的叶子数
    'classifier__max_depth': [8],  # 最大深度
    'classifier__learning_rate': [ 0.13],  # 学习率
    'classifier__n_estimators': [1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }



Classification Report:
[[    0     0     0     0     0]
 [    0  7021  9426  1685     0]
 [    0  3273 42552  2665     0]
 [    0  2462  9820  5677     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.550408  0.387216  0.454610  18132.0   0.507620
0    0.688566  0.877542  0.771652  48490.0   0.719557
1    0.566171  0.316109  0.405703  17959.0   0.488832

        classifier = lgb.LGBMClassifier(random_state=self.random_state,
                                        force_col_wise=True,
                                        importance_type='weight',#'split',
                                        )  # 通过GOSS来加速训练, boosting_type='goss',

[[    0     0     0     0     0]
 [    0  6989  9495  1648     0]
 [    0  3244 42513  2733     0]
 [    0  2484  9823  5652     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.549579  0.385451  0.453110  18132.0   0.506449
0    0.687568  0.876737  0.770715  48490.0   0.718577
1    0.563341  0.314717  0.403830  17959.0   0.486478

    def fit_class_model(self, x_train, y_train, numeric_features, categorical_features, param_grid=None):
        """
        训练分类模型，并进行超参数优化
        """
        preprocessor = self.preprocess_data(x_train, numeric_features, categorical_features)
        classifier = lgb.LGBMClassifier(random_state=self.random_state,
                                        force_col_wise=True,
                                        importance_type='cover',#'split',
                                        )  # 通过GOSS来加速训练, boosting_type='goss',

Classification Report:
[[    0     0     0     0     0]
 [    0  6989  9495  1648     0]
 [    0  3244 42513  2733     0]
 [    0  2484  9823  5652     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.549579  0.385451  0.453110  18132.0   0.506449
0    0.687568  0.876737  0.770715  48490.0   0.718577
1    0.563341  0.314717  0.403830  17959.0   0.486478

        classifier = lgb.LGBMClassifier(random_state=self.random_state,
                                        force_col_wise=True,
                                        importance_type='gain',#'split',
                                        )  # 通过GOSS来加速训练, boosting_type='goss',

Classification Report:
[[    0     0     0     0     0]
 [    0  6989  9495  1648     0]
 [    0  3244 42513  2733     0]
 [    0  2484  9823  5652     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.549579  0.385451  0.453110  18132.0   0.506449
0    0.687568  0.876737  0.770715  48490.0   0.718577
1    0.563341  0.314717  0.403830  17959.0   0.486478

        classifier = lgb.LGBMClassifier(random_state=self.random_state,
                                        force_col_wise=True,
                                       # importance_type='split',#'split', # 会降低评估指标
                                        )  # 通过GOSS来加速训练, boosting_type='goss',

Classification Report:
[[    0     0     0     0     0]
 [    0  6928  9565  1766     0]
 [    0  3357 42508  2675     0]
 [    0  2246  9876  5660     0]
 [    0     0     0     0     0]]
    precision    recall  f1-score  support  f05-score
-1   0.552869  0.379429  0.450016  18259.0   0.506559
0    0.686177  0.875731  0.769452  48540.0   0.717226
1    0.560341  0.318299  0.405982  17782.0   0.486371



    # 分类
    param_grid_class = {    
    'classifier__objective': ['multiclass'],  # 三分类任务
    'classifier__num_class': [3],  # 类别数
    'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [255],  # 树的叶子数
    'classifier__max_depth': [8],  # 最大深度
    'classifier__learning_rate': [ 0.12],  # 学习率
    'classifier__n_estimators': [1200],#[1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  8781  7735   997     0]
 [    0  3494 42135  3032     0]
 [    0  1637  8664  7034     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.631182  0.501399  0.558854  17513.0   0.600115
0.0    0.719838  0.865888  0.786137  48661.0   0.744969
1.0    0.635813  0.405769  0.495387  17335.0   0.571062



  macd_df = pd.read_sql(f"""
                    SELECT 
                        primary_key
                        ,close_slope_12_26_9
                        ,volume_slope_12_26_9
                        ,turnover_slope_12_26_9
                        ,turnover_pct_slope_12_26_9
                        ,close_acceleration_12_26_9
                        ,volume_acceleration_12_26_9
                        ,turnover_acceleration_12_26_9
                        ,turnover_pct_acceleration_12_26_9
                        ,close_hist_12_26_9
                        ,volume_hist_12_26_9
                        ,turnover_hist_12_26_9
                        ,turnover_pct_hist_12_26_9
                        ,close_diff_1
                        ,close_diff_5
                        ,close_diff_30
                        ,volume_diff_1
                        ,volume_diff_5
                        ,volume_diff_30
                        ,turnover_diff_1
                        ,turnover_diff_5
                        ,turnover_diff_30
                        ,turnover_hist_diff_1
                        ,volume_hist_diff_1
                        ,close_hist_diff_1

Classification Report:
[[    0     0     0     0     0]
 [    0  8908  7785   963     0]
 [    0  3520 42114  2985     0]
 [    0  1606  8409  7217     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.634744  0.504531  0.562196  17656.0   0.603588
0.0    0.722268  0.866205  0.787715  48619.0   0.747097
1.0    0.646395  0.418814  0.508293  17232.0   0.583032

## ETF和北交所补上prev_close，数据反而下降

    param_grid_class = {    
    'classifier__objective': ['multiclass'],  # 三分类任务
    'classifier__num_class': [3],  # 类别数
    'classifier__boosting_type': ['gbdt'],  # 梯度提升决策树
    'classifier__metric': ['multi_logloss'],  # 多分类交叉熵
    'classifier__num_leaves': [255],  # 树的叶子数
    'classifier__max_depth': [8],  # 最大深度
    'classifier__learning_rate': [ 0.12],  # 学习率
    'classifier__n_estimators': [1200],#[1200],  # 树的数量
    #'classifier__min_child_samples': [10, 20, 30],  # 每个叶子节点的最小样本数
    #'classifier__subsample': [0.7, 0.8, 1.0],  # 样本采样比例
    #'classifier__colsample_bytree': [0.7, 0.8, 1.0],  # 每棵树的特征采样比例
         }

Classification Report:
[[    0     0     0     0     0]
 [    0  8392  8026  1007     0]
 [    0  3553 42379  3076     0]
 [    0  1580  8699  6868     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.620481  0.481607  0.542294  17425.0   0.586648
0.0    0.717024  0.864736  0.783983  49008.0   0.742387
1.0    0.627157  0.400537  0.488860  17147.0   0.563403



df = df[(df.high <= df.limit_up_ceil)&(df.low >= df.limit_down_floor)]

Classification Report:
[[    0     0     0     0     0]
 [    0  8581  7790  1033     0]
 [    0  3588 42497  3114     0]
 [    0  1675  8726  7077     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.619835  0.493048  0.549219  17404.0   0.589516
0.0    0.720129  0.863778  0.785440  49199.0   0.744905
1.0    0.630524  0.404909  0.493136  17478.0   0.567304



    flow_list = ['loge_main_inflow', 'loge_ultra_large_inflow',
           'loge_large_inflow', 'loge_medium_inflow', 'loge_small_inflow',
           'main_inflow_slope_12_26_9', 'ultra_large_inflow_slope_12_26_9',
           'large_inflow_slope_12_26_9', 'medium_inflow_slope_12_26_9',
           'small_inflow_slope_12_26_9', 'main_inflow_acceleration_12_26_9',
           'ultra_large_inflow_acceleration_12_26_9',
           'large_inflow_acceleration_12_26_9',
           'medium_inflow_acceleration_12_26_9',
           'small_inflow_acceleration_12_26_9', 'main_inflow_hist_12_26_9',
           'ultra_large_inflow_hist_12_26_9', 'large_inflow_hist_12_26_9',
           'medium_inflow_hist_12_26_9', 'small_inflow_hist_12_26_9',
           'main_inflow_diff_1', 'main_inflow_diff_5', 'main_inflow_diff_30',
           'ultra_large_inflow_diff_1', 'ultra_large_inflow_diff_5',
           'ultra_large_inflow_diff_30', 'large_inflow_diff_1',
           'large_inflow_diff_5', 'large_inflow_diff_30', 'medium_inflow_diff_1',
           'medium_inflow_diff_5', 'medium_inflow_diff_30', 'small_inflow_diff_1',
           'small_inflow_diff_5', 'small_inflow_diff_30',
           'main_inflow_hist_diff_1', 'ultra_large_inflow_hist_diff_1',
           'large_inflow_hist_diff_1', 'medium_inflow_hist_diff_1',
           'small_inflow_hist_diff_1']

Classification Report:
[[    0     0     0     0     0]
 [    0  9323  7292   789     0]
 [    0  3311 43059  2829     0]
 [    0  1155  7828  8495     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.676119  0.535681  0.597762  17404.0   0.642434
0.0    0.740112  0.875201  0.802008  49199.0   0.763688
1.0    0.701313  0.486040  0.574161  17478.0   0.644244

新增主力减去散户资金macd

Classification Report:
[[    0     0     0     0     0]
 [    0  9384  7355   760     0]
 [    0  3342 43076  2855     0]
 [    0  1086  7733  8490     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.679409  0.536259  0.599406  17499.0   0.644975
0.0    0.740596  0.874231  0.801884  49273.0   0.763951
1.0    0.701363  0.490496  0.577276  17309.0   0.645834



添加indicators_list

Classification Report:
[[    0     0     0     0     0]
 [    0  9376  7420   830     0]
 [    0  3345 43032  2840     0]
 [    0  1119  7657  8462     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.677457  0.531941  0.595945  17626.0   0.642315
0.0    0.740539  0.874332  0.801893  49217.0   0.763919
1.0    0.697494  0.490892  0.576234  17238.0   0.643342

去掉indicators_list

Classification Report:
[[    0     0     0     0     0]
 [    0  9356  7444   826     0]
 [    0  3370 43004  2843     0]
 [    0  1094  7798  8346     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.676990  0.530807  0.595052  17626.0   0.641648
0.0    0.738317  0.873763  0.800350  49217.0   0.761939
1.0    0.694632  0.484163  0.570608  17238.0   0.639070



Classification Report:
[[    0     0     0     0     0]
 [    0  9361  7548   749     0]
 [    0  3297 42745  2872     0]
 [    0  1149  7898  8462     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.677989  0.530128  0.595010  17658.0   0.642167
0.0    0.734564  0.873881  0.798189  48914.0   0.758756
1.0    0.700323  0.483294  0.571911  17509.0   0.642609



添加full_code

Classification Report:
[[    0     0     0     0     0]
 [    0  9049  7534   712     0]
 [    0  3354 42725  2743     0]
 [    0  1098  7902  8262     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.670247  0.523215  0.587674  17295.0   0.634581
0.0    0.734599  0.875118  0.798725  48822.0   0.758973
1.0    0.705129  0.478624  0.570206  17262.0   0.644160

重刷数据

Classification Report:
[[    0     0     0     0     0]
 [    0  8292  6750   673     0]
 [    0  3009 33637  2582     0]
 [    0   942  7162  7036     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.677285  0.527649  0.593175  15715.0   0.640932
0.0    0.707418  0.857474  0.775252  39228.0   0.733075
1.0    0.683704  0.464729  0.553340  15140.0   0.624822



Classification Report:
[[    0     0     0     0     0]
 [    0  8397  6545   638     0]
 [    0  3185 33717  2620     0]
 [    0   958  6958  7065     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.669617  0.538960  0.597226  15580.0   0.638652
0.0    0.714041  0.853120  0.777409  39522.0   0.738106
1.0    0.684394  0.471597  0.558410  14981.0   0.627743

重刷数据

Classification Report:
[[    0     0     0     0     0]
 [    0  9284  7432   686     0]
 [    0  3249 42728  2747     0]
 [    0  1123  7749  8347     0]
 [    0     0     0     0     0]]
      precision    recall  f1-score  support  f05-score
-1.0   0.679848  0.533502  0.597849  17402.0   0.644489
0.0    0.737847  0.876939  0.801403  48724.0   0.762020
1.0    0.708574  0.484755  0.575675  17219.0   0.648673



实际部署

        self.params = {'task': 'train',
                'boosting': 'gbdt',
                'objective': 'multiclass',
                'num_class': 3,
                'max_depth':8,
                'num_leaves': 255,
                'learning_rate': 0.1,
                'metric': ['multi_logloss'],
                'verbose': -1, # 控制输出信息的详细程度，-1 表示不输出任何信息
                #'early_stop_round':20,
                'n_estimators': 1500,
                #'min_child_sample':40,
                #'min_child_weight':1,
                #'subsample':0.8,# 样本采样比例
                #'colsample_bytree':0.8, # 每棵树的特征采样比例
                }

Classification Report:
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0  4443  4122   585]
 [    0     0  1782 22718  1838]
 [    0     0   721  4344  4760]]
     precision    recall  f1-score  support  f05-score
0.0   0.639649  0.485574  0.552063   9150.0   0.601478
1.0   0.728515  0.862556  0.789889  26338.0   0.751883
2.0   0.662676  0.484478  0.559737   9825.0   0.617268

        self.params = {'task': 'train',
                'boosting': 'gbdt',
                'objective': 'multiclass',
                'num_class': 3,
                'max_depth':8,
                'num_leaves': 255,
                'learning_rate': 0.1,
                'metric': ['multi_logloss'],
                'verbose': -1, # 控制输出信息的详细程度，-1 表示不输出任何信息
                #'early_stop_round':20,
                'n_estimators': 1500,
                #'min_child_sample':40,
                #'min_child_weight':1,
                #'subsample':0.8,# 样本采样比例
                #'colsample_bytree':0.8, # 每棵树的特征采样比例
                }

Classification Report:
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0  4405  4205   536]
 [    0     0  1805 22728  1841]
 [    0     0   654  4363  4776]]
     precision    recall  f1-score  support  f05-score
0.0   0.641754  0.481631  0.550281   9146.0   0.601743
1.0   0.726227  0.861758  0.788209  26374.0   0.749812
2.0   0.667692  0.487695  0.563673   9793.0   0.621794



Classification Report:
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0  4312  4261   527]
 [    0     0  1896 22684  1819]
 [    0     0   703  4345  4766]]
     precision    recall  f1-score  support  f05-score
0.0   0.623933  0.473846  0.538630   9100.0   0.586762
1.0   0.724960  0.859275  0.786424  26399.0   0.748355
2.0   0.670135  0.485633  0.563157   9814.0   0.622811

日级刷数据

Classification Report:
[[     0      0      0      0      0]
 [     0      0      0      0      0]
 [     0      0  62676  41596   9004]
 [     0      0  25212 172327  20743]
 [     0      0  14527  44482  42499]]
   precision    recall  f1-score   support  f05-score
0   0.611981  0.553303  0.581165  113276.0   0.599270
1   0.666887  0.789470  0.723020  218282.0   0.688261
2   0.588254  0.418676  0.489186  101508.0   0.544172



[14777 rows x 1 columns]
Classification Report:
[[     0      0      0      0      0]
 [     0      0      0      0      0]
 [     0      0  69116  37561   6460]
 [     0      0  23870 176884  18389]
 [     0      0  12753  41285  46861]]
   precision    recall  f1-score   support  f05-score
0   0.653647  0.610905  0.631554  113137.0   0.644627
1   0.691683  0.807162  0.744974  219143.0   0.712057
2   0.653479  0.464435  0.542973  100899.0   0.604285



#上线的模型

Classification Report:
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 23977 13670 13715]
 [    0     0 18273 46673 15411]
 [    0     0 12653 10524 10655]]
   precision    recall  f1-score  support  f05-score
0   0.436716  0.466824  0.451268  51362.0   0.442423
1   0.658600  0.580821  0.617270  80357.0   0.641421
2   0.267841  0.314939  0.289487  33832.0   0.276099

#线下测试

Classification Report:
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0  9736  6149  2952]
 [    0     0 11447 20672  3439]
 [    0     0 11263  9722  3837]]
   precision    recall  f1-score  support  f05-score
0   0.300068  0.516855  0.379697  18837.0   0.327545
1   0.565690  0.581360  0.573418  35558.0   0.568756
2   0.375147  0.154581  0.218944  24822.0   0.291858

#过拟合

Classification Report:
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 28094  9354  1736]
 [    0     0  7521 43687  5846]
 [    0     0  4021 10599 17341]]
   precision    recall  f1-score  support  f05-score
0   0.708800  0.716976  0.712865  39184.0   0.710420
1   0.686471  0.765713  0.723930  57054.0   0.700979
2   0.695783  0.542568  0.609697  31961.0   0.658587

3折时序交叉验证

Classification Report:
[[     0      0      0      0      0]
 [     0      0      0      0      0]
 [     0      0  46803  51613  23994]
 [     0      0  44153 147824  34384]
 [     0      0  42441  54099  29794]]
   precision    recall  f1-score   support  f05-score
0   0.350855  0.382346  0.365924  122410.0   0.356731
1   0.583049  0.653045  0.616066  226361.0   0.595822
2   0.337908  0.235835  0.277792  126334.0   0.310988





滚动训练
[[     0      0      0      0      0]
 [     0      0      0      0      0]
 [     0      0  86476  69638  14549]
 [     0      0  32832 151582  23642]
 [     0      0  29654  66873  49050]]

mse_scores
Out[7]: 
[[array([0.52645212, 0.65646698, 0.46796442]), 1.6508835273580744],
 [array([0.60091446, 0.56019333, 0.54827024]), 1.709378028786836],
 [array([0.4546185 , 0.7731783 , 0.38115301]), 1.6089498052277105],
 [array([0.52207509, 0.62808082, 0.42615472]), 1.5763106291518916],
 [array([0.56408845, 0.55711144, 0.49591439]), 1.6171142793295412]]

滚动训练    params={'objective': 'multiclass',
            'num_class': 3,
            'boosting_type': 'gbdt',
            'metric': 'multi_logloss',
            'num_leaves': 255,
            'max_depth': 8,
            'learning_rate': 0.12,
            'n_estimators': 1200,
            }

[[     0      0      0      0      0]
 [     0      0      0      0      0]
 [     0      0 107163  50165  13335]
 [     0      0  40486 138576  28994]
 [     0      0  24509  53592  67476]]

mse_scores
Out[9]: 
[[array([0.532683  , 0.65887338, 0.48793428]), 1.679490654505535],
 [array([0.65106588, 0.58634825, 0.59589167]), 1.8333058010080632],
 [array([0.63333725, 0.81983708, 0.60466448]), 2.0578388034472157],
 [array([0.59518244, 0.65905   , 0.52470273]), 1.7789351645419407],
 [array([0.62355187, 0.5884891 , 0.57691814]), 1.788959105639521]]

    params={'objective': 'multiclass',
            'num_class': 3,
            'boosting_type': 'gbdt',
            'metric': 'multi_logloss',
            'num_leaves': 255,
            'max_depth': 8,
            'learning_rate': 0.12,
            'n_estimators': int(200/n_splits),
            }

[[     0      0      0      0      0]
 [     0      0      0      0      0]
 [     0      0  83067  75609  11987]
 [     0      0  29858 157805  20393]
 [     0      0  27943  71713  45921]]

[[array([0.52954498, 0.65519815, 0.46993439]), 1.6546775176980928],
 [array([0.60361855, 0.55827178, 0.55310453]), 1.7149948561811135],
 [array([0.48780701, 0.77729586, 0.417876  ]), 1.6829788723196903],
 [array([0.5315793 , 0.62839473, 0.4344011 ]), 1.594375130805581],
 [array([0.56574744, 0.55232037, 0.50046754]), 1.6185353596747545]]

[[     0      0      0      0      0]
 [     0      0      0      0      0]
 [     0      0  84762  73769  12132]
 [     0      0  31069 156180  20807]
 [     0      0  29071  70169  46337]]

[[array([0.52938742, 0.65507904, 0.46923971]), 1.6537061671825155],
 [array([0.60361551, 0.55826788, 0.55310001]), 1.714983396435941],
 [array([0.48784708, 0.77730143, 0.41786565]), 1.6830141644631351],
 [array([0.53090925, 0.62813214, 0.43322688]), 1.5922682743161287],
 [array([0.56487589, 0.55440857, 0.50074457]), 1.6200290390436858]]





conf_matrix
Out[21]: 
array([[     0,      0,      0,      0,      0],
       [     0,      0,      0,      0,      0],
       [     0,      0,  83037,  75650,  11976],
       [     0,      0,  29825, 157854,  20377],
       [     0,      0,  27924,  71756,  45897]], dtype=int64)

scores
Out[22]: 
[[array([0.52639606, 0.65382684, 0.46602028]), 1.6462431891005505],
 [array([0.60361266, 0.55826788, 0.55309432]), 1.7149748650046246],
 [array([0.48782037, 0.77729726, 0.417876  ]), 1.682993620335826],
 [array([0.53158354, 0.62839473, 0.43439543]), 1.5943737000853158],
 [array([0.56579591, 0.5522862 , 0.5004285 ]), 1.6185106108879077]]



scores
Out[8]: 
[[array([0.52771365, 0.65441888, 0.4686017 ]), 1.6507342256330628],
 [array([0.60361266, 0.5582683 , 0.55310335]), 1.7149843151903252],
 [array([0.48867906, 0.77761549, 0.42020908]), 1.6865036222109526],
 [array([0.5315793 , 0.62839473, 0.4344011 ]), 1.594375130805581],
 [array([0.56574744, 0.55232192, 0.50046318]), 1.6185325427673756]]

   precision    recall  f1-score   support  f05-score
0    0.58968  0.486731  0.533282  170663.0   0.565747
1    0.51718  0.758474  0.615006  208056.0   0.552322
2    0.58646  0.315441  0.410231  145577.0   0.500463



[[     0      0      0      0      0]
 [     0      0      0      0      0]
 [     0      0  78104  69536  12122]
 [     0      0  28659 148719  21081]
 [     0      0  26177  66139  46638]]

   precision    recall  f1-score  support  f05-score
0   0.402559  0.388304  0.395303  44478.0   0.399625
1   0.618931  0.678559  0.647375  73967.0   0.630004
2   0.247497  0.203211  0.223178  31022.0   0.237160

[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 22808 15220  6450]
 [    0     0 19155 46156  8656]
 [    0     0 14353 12073  4596]]
   precision    recall  f1-score  support  f05-score
0   0.405000  0.512793  0.452567  44478.0   0.422774
1   0.628409  0.624008  0.626201  73967.0   0.627524
2   0.233276  0.148153  0.181216  31022.0   0.209232



   precision    recall  f1-score  support  f05-score
0   0.343234  0.345542  0.344384  44478.0   0.343693
1   0.775613  0.328336  0.461365  73967.0   0.609542
2   0.243002  0.574786  0.341590  31022.0   0.274717



                               class_weight={0: 10,
                                             1: 1,
                                             2: 10,},

[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 20803    62 23613]
 [    0     0 29821  2946 41200]
 [    0     0 15098   134 15790]]
   precision    recall  f1-score  support  f05-score
0   0.316530  0.467714  0.377550  44478.0   0.338408
1   0.937619  0.039829  0.076411  73967.0   0.170220
2   0.195898  0.508994  0.282912  31022.0   0.223380

multi_logloss

[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 15369  3555 25554]
 [    0     0 19688 24286 29993]
 [    0     0  9720  3471 17831]]
   precision    recall  f1-score  support  f05-score
0   0.343234  0.345542  0.344384  44478.0   0.343693
1   0.775613  0.328336  0.461365  73967.0   0.609542
2   0.243002  0.574786  0.341590  31022.0   0.274717



multi_error

   precision    recall  f1-score  support  f05-score
0   0.343234  0.345542  0.344384  44478.0   0.343693
1   0.775613  0.328336  0.461365  73967.0   0.609542
2   0.243002  0.574786  0.341590  31022.0   0.274717







[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 57090 18323 56295]
 [    0     0 71368 77893 81084]
 [    0     0 55814 18274 62136]]
   precision    recall  f1-score   support  f05-score
0   0.309814  0.433459  0.361352  131708.0   0.328558
1   0.680348  0.338158  0.451770  230345.0   0.565832
2   0.311435  0.456131  0.370145  136224.0   0.332533
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 15369  3555 25554]
 [    0     0 19688 24286 29993]
 [    0     0  9720  3471 17831]]
   precision    recall  f1-score  support  f05-score
0   0.343234  0.345542  0.344384  44478.0   0.343693
1   0.775613  0.328336  0.461365  73967.0   0.609542
2   0.243002  0.574786  0.341590  31022.0   0.274717





[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 21578  8675 14225]
 [    0     0 17956 38442 17569]
 [    0     0 11384  7865 11773]]
   precision    recall  f1-score  support  f05-score
0   0.423779  0.485139  0.452388  44478.0   0.434777
1   0.699174  0.519718  0.596236  73967.0   0.654009
2   0.270227  0.379505  0.315677  31022.0   0.286741



全量数据训练效果更好

[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 21578  8675 14225]
 [    0     0 17956 38442 17569]
 [    0     0 11384  7865 11773]]
   precision    recall  f1-score  support  f05-score
0   0.423779  0.485139  0.452388  44478.0   0.434777
1   0.699174  0.519718  0.596236  73967.0   0.654009
2   0.270227  0.379505  0.315677  31022.0   0.286741



​                               early_stopping_rounds=50, 

[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 21572  4871 18035]
 [    0     0 18274 29796 25897]
 [    0     0 12879  4684 13459]]
   precision    recall  f1-score  support  f05-score
0   0.409142  0.485004  0.443855  44478.0   0.422354
1   0.757185  0.402828  0.525883  73967.0   0.643901
2   0.234514  0.433853  0.304457  31022.0   0.258245





   precision    recall  f1-score   support  f05-score
0   0.356920  0.408715  0.381065  131708.0   0.366201
1   0.625999  0.469769  0.536747  230345.0   0.586959
2   0.326390  0.418333  0.366686  136224.0   0.341397
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 18169  5695 20614]
 [    0     0 15465 29374 29128]
 [    0     0  9810  4979 16233]]
   precision    recall  f1-score  support  f05-score
0   0.418217  0.408494  0.413298  44478.0   0.416235
1   0.733470  0.397123  0.515266  73967.0   0.627223
2   0.246048  0.523274  0.334711  31022.0   0.275208

去除最大日期

   precision    recall  f1-score   support  f05-score
0   0.323699  0.459902  0.379963  131739.0   0.344079
1   0.687062  0.342200  0.456857  230292.0   0.571810
2   0.318427  0.459030  0.376015  136246.0   0.339207
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 16077  3053 25348]
 [    0     0 13710 22464 31154]
 [    0     0  9310  3208 18504]]
   precision   recall  f1-score  support  f05-score
0   0.411208  0.36146  0.384732  44478.0   0.400192
1   0.782037  0.33365  0.467742  67328.0   0.616371
2   0.246700  0.59648  0.349040  31022.0   0.279478

标准化

   precision    recall  f1-score   support  f05-score
0   0.332607  0.491319  0.396677  131729.0   0.355580
1   0.713810  0.350099  0.469785  230326.0   0.591012
2   0.325142  0.455227  0.379342  136222.0   0.344851
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 19840  4036 20602]
 [    0     0 15151 25619 26558]
 [    0     0 11793  3740 15489]]
   precision    recall  f1-score  support  f05-score
0   0.424077  0.446063  0.434792  44478.0   0.428299
1   0.767151  0.380510  0.508702  67328.0   0.637580
2   0.247235  0.499291  0.330711  31022.0   0.275000

正常

   precision    recall  f1-score   support  f05-score
0   0.324295  0.448227  0.376320  131739.0   0.343278
1   0.688568  0.340893  0.456021  230292.0   0.571910
2   0.321534  0.477137  0.384177  136246.0   0.343969
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 14553  2997 26928]
 [    0     0 12912 22877 31539]
 [    0     0  8824  3191 19007]]
   precision    recall  f1-score  support  f05-score
0   0.401031  0.327195  0.360370  44478.0   0.383713
1   0.787098  0.339784  0.474661  67328.0   0.623053
2   0.245334  0.612694  0.350372  31022.0   0.278762



没有alpha

     precision    recall  f1-score   support  f05-score
0   0.329705  0.523338  0.404545  131739.0   0.356053
1   0.672471  0.381529  0.486844  230292.0   0.583482
2   0.299485  0.348429  0.322108  136246.0   0.308142
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 31606  5386  7486]
 [    0     0 26948 29383 10997]
 [    0     0 20030  4658  6334]]
   precision    recall  f1-score  support  f05-score
0   0.402194  0.710598  0.513660  44478.0   0.440423
1   0.745251  0.436416  0.550475  67328.0   0.652851
2   0.255228  0.204178  0.226867  31022.0   0.243073





macd基础

   precision    recall  f1-score   support  f05-score
0   0.330631  0.550665  0.413180  131739.0   0.359348
1   0.643364  0.481788  0.550975  230292.0   0.602924
2   0.306353  0.239266  0.268685  136246.0   0.290086
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 27497  6433 10548]
 [    0     0 22673 31395 13260]
 [    0     0 17784  5619  7619]]
   precision    recall  f1-score  support  f05-score
0   0.404641  0.618216  0.489131  44478.0   0.434675
1   0.722605  0.466299  0.566825  67328.0   0.651035
2   0.242435  0.245600  0.244007  31022.0   0.243061

macd标准化&异常值

   precision    recall  f1-score   support  f05-score
0   0.306756  0.493657  0.378386  131729.0   0.331887
1   0.526973  0.508227  0.517430  230326.0   0.523114
2   0.311698  0.146797  0.199594  136222.0   0.254517
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 22339 15565  6574]
 [    0     0 23385 33570 10373]
 [    0     0 14004 11875  5143]]
   precision    recall  f1-score  support  f05-score
0   0.374012  0.502248  0.428747  44478.0   0.394139
1   0.550238  0.498604  0.523150  67328.0   0.539073
2   0.232820  0.165786  0.193666  31022.0   0.215401

macd标准化

0   0.306999  0.485732  0.376216  131729.0   0.331387
1   0.528063  0.502271  0.514844  230326.0   0.522695
2   0.312645  0.162448  0.213805  136222.0   0.263854
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 22266 14929  7283]
 [    0     0 22162 33266 11900]
 [    0     0 13850 11425  5747]]
   precision    recall  f1-score  support  f05-score
0   0.382065  0.500607  0.433376  44478.0   0.401059
1   0.557967  0.494089  0.524089  67328.0   0.543903
2   0.230525  0.185256  0.205426  31022.0   0.219784

指标基准

   precision    recall  f1-score   support  f05-score
0   0.314853  0.652457  0.424741  131739.0   0.351198
1   0.632263  0.462213  0.534028  230292.0   0.588929
2   0.304747  0.127329  0.179612  136246.0   0.238329
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 27331  6734 10413]
 [    0     0 24505 32208 10615]
 [    0     0 18363  5591  7068]]
   precision    recall  f1-score  support  f05-score
0   0.389336  0.614484  0.476661  44478.0   0.420123
1   0.723239  0.478375  0.575858  67328.0   0.656074
2   0.251566  0.227838  0.239115  31022.0   0.246433



   precision    recall  f1-score   support  f05-score
0   0.309012  0.460999  0.370006  131729.0   0.330826
1   0.572053  0.272175  0.368854  230326.0   0.468759
2   0.292411  0.412510  0.342230  136222.0   0.310491
[[    0     0     0     0     0]
 [    0     0     0     0     0]
 [    0     0 29690  6611  8177]
 [    0     0 36266 19717 11345]
 [    0     0 20210  5034  5778]]
   precision    recall  f1-score  support  f05-score
0   0.344567  0.667521  0.454518  44478.0   0.381480
1   0.628691  0.292850  0.399574  67328.0   0.511397
2   0.228379  0.186255  0.205177  31022.0   0.218496
