### **VWAP（Volume-Weighted Average Price）**

VWAP（**Volume-Weighted Average Price**）是一个衡量某段时间内加权平均价格的指标，常用于衡量一个证券在特定交易日内的平均交易价格，权重通常是交易量。它是一种广泛使用的技术分析工具，特别是在美股和A股市场中，帮助交易者评估股票在某一天的价格水平。

#### **VWAP 的定义**：

VWAP 计算公式为：

VWAP=∑i=1nPi×Vi∑i=1nVi\text{VWAP} = \frac{\sum_{i=1}^{n} P_i \times V_i}{\sum_{i=1}^{n} V_i}

-   PiP_i 是第 ii 个交易时段的价格（通常为成交价或加权平均价）。
-   ViV_i 是该时段的成交量。
-   nn 是某一天的所有时段。

### **VWAP 计算方法**：

VWAP 计算的是某段时间内的加权平均价格，**通常是按日计算**，但可以根据需要在其他时间粒度（如小时、分钟）上进行计算。

#### **1. 日内 VWAP 计算（常见）**：

在实际交易中，VWAP 主要用于 **日内交易**，即一个完整交易日内的平均加权成交价格。VWAP 计算通常使用**分钟级别的数据**，然后对每分钟的价格和成交量进行加权求和，最终得到一个日内的 VWAP。

-   **分钟级别 VWAP 计算：**

假设你有每分钟的成交价和成交量，你可以使用以下步骤来计算 VWAP：

1.  对每分钟的成交量 ViV_i 和成交价 PiP_i 求加权和。
2.  将所有分钟的加权成交价求和，再除以总成交量。

举个例子：

假设你有 5 分钟的交易数据：

| 时间  | 成交价 (PiP_i) | 成交量 (ViV_i) |
| ----- | -------------- | -------------- |
| 10:00 | 100            | 200            |
| 10:01 | 101            | 300            |
| 10:02 | 102            | 400            |
| 10:03 | 103            | 500            |
| 10:04 | 104            | 600            |

**VWAP 计算过程：**

VWAP=(100×200)+(101×300)+(102×400)+(103×500)+(104×600)200+300+400+500+600\text{VWAP} = \frac{(100 \times 200) + (101 \times 300) + (102 \times 400) + (103 \times 500) + (104 \times 600)}{200 + 300 + 400 + 500 + 600}VWAP=20000+30300+40800+51500+624002000\text{VWAP} = \frac{20000 + 30300 + 40800 + 51500 + 62400}{2000}VWAP=2050002000=102.5\text{VWAP} = \frac{205000}{2000} = 102.5

所以，今天的 VWAP 值为 102.5。

#### **2. VWAP 的扩展：**

尽管 VWAP 在日内交易中最常见，但它也可以应用于其他时间区间。你可以计算每小时的 VWAP 或跨多个交易日的 VWAP。下面是几种常见的应用：

-   **跨日 VWAP（例如：多个交易日的加权平均价）**： VWAP 也可以跨多个交易日进行计算，方法与日内 VWAP 类似，只不过你要累积多个交易日的数据。

    公式类似：

    VWAPmulti-day=∑i=1nPi×Vi∑i=1nVi\text{VWAP}_{\text{multi-day}} = \frac{\sum_{i=1}^{n} P_i \times V_i}{\sum_{i=1}^{n} V_i}

    其中，PiP_i 和 ViV_i 现在可能是跨多个交易日的数据。

-   **小时VWAP（小时加权平均价格）**： 对每小时的数据进行加权求和，计算每个小时的 VWAP。方法和日内 VWAP 类似，只不过时间单位是按小时来分割。

#### **3. VWAP 描述的时间范围：**

-   **日内 VWAP**：通常被用来描述**当天的成交加权平均价**。这种 VWAP 常用于做市商、机构投资者和日内交易者，用来判断股票当天的平均成交价格。
-   **跨日 VWAP**：如果描述的是“**daily VWAP**”而不是日内 VWAP，那么这可能指的是**跨多个交易日的 VWAP**，例如，过去 5 天的 VWAP。这个VWAP也可以描述整个交易日的某个时间段（例如：从开盘到中午的VWAP）。

### **A股与美股的VWAP使用**

-   **美股：** VWAP 是美股市场中非常常见的指标，尤其是在高频交易、做市商和机构投资者之间，它是判断市场动态、进出场的一个重要参考。美股中常常使用分时数据来计算 VWAP，帮助交易者判断股票的价格是否处于相对高位或低位。
-   **A股：** A股市场的交易时间和交易规则与美股不同，但 VWAP 也常常用于分析日内价格走势。A股的 VWAP 计算方法与美股类似，只不过由于交易的小时数较短，数据的波动性也较大。

### **总结：**

-   **VWAP** 是加权平均价格的一个指标，通常用于计算**日内的成交加权平均价**，但也可以在多个交易日上计算。
-   **计算方式**：VWAP = ∑iPi×Vi∑iVi\frac{\sum_{i} P_i \times V_i}{\sum_{i} V_i}，其中 PiP_i 是成交价，ViV_i 是成交量。
-   VWAP 描述的通常是日内的情况，但也有跨日的 VWAP。
-   美股和 A股的 VWAP 计算方法一致，但应用场景和时间周期可能有所不同。